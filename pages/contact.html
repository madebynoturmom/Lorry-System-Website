<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
    <link rel="stylesheet" href="/lorrysystem/assets/css/styles.css" />
  </head>
  <body>
    <!-- Dynamic header placeholder -->
    <div id="header-placeholder"></div>

    <main>
      <section class="contact-form">
        <h1>Contact Us</h1>
        <form id="contactForm">
          <div class="form-group">
            <label for="firstName">First Name *</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name *</label>
            <input type="text" id="lastName" name="lastName" required />
          </div>
          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="companyName">Company Name *</label>
            <input type="text" id="companyName" name="companyName" required />
          </div>
          <div class="form-group">
            <label for="role">Role in Business *</label>
            <input type="text" id="role" name="role" required />
          </div>
          <div class="form-group">
            <label for="fleetSize">Fleet Size</label>
            <input type="number" id="fleetSize" name="fleetSize" />
          </div>
          <div class="form-group">
            <label for="transportationMode">Mode of Transportation *</label>
            <input
              type="text"
              id="transportationMode"
              name="transportationMode"
              required
            />
          </div>
          <div class="form-group">
            <label for="phoneNumber">Phone Number *</label>
            <input type="tel" id="phoneNumber" name="phoneNumber" required />
          </div>
          <button type="submit" class="btn-primary">Send</button>
        </form>
      </section>
    </main>

    <!-- Dynamic footer placeholder -->
    <div id="footer-placeholder"></div>

    <script src="/lorrysystem/assets/js/script.js"></script>
    <script>
      // Dynamically load header
      fetch("/lorrysystem/partials/header.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("header-placeholder").innerHTML = data;
        })
        .catch((error) => console.error("Error loading header:", error));

      // Dynamically load footer
      fetch("/lorrysystem/partials/footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer-placeholder").innerHTML = data;
        })
        .catch((error) => console.error("Error loading footer:", error));

      // HTTP Post using FormSubmit with redirect
      const formEl = document.getElementById("contactForm");
      formEl.setAttribute("action", "https://formsubmit.co/pkartikean@gmail.com");
      formEl.setAttribute("method", "POST");

      // Add hidden input fields for FormSubmit
      const hiddenInputs = [
        { name: "_subject", value: "New Contact Form Submission" },
        { name: "_captcha", value: "false" },
        { name: "_template", value: "table" },
        { name: "_next", value: "https://madebynoturmom.github.io/lorrysystem/pages/contact.html" }
      ];

      hiddenInputs.forEach(inputData => {
        const input = document.createElement("input");
        input.type = "hidden";
        input.name = inputData.name;
        input.value = inputData.value;
        formEl.appendChild(input);
      });

      // Display success message after form submission
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get("success") === "true") {
        const successMessage = document.createElement("div");
        successMessage.textContent = "Thank you for reaching out! We will contact you shortly.";
        successMessage.style.cssText = "background-color: #d4edda; color: #155724; padding: 10px; border: 1px solid #c3e6cb; border-radius: 5px; margin: 10px 0; text-align: center;";
        document.body.insertBefore(successMessage, document.body.firstChild);

        // Automatically close the message after 5 seconds
        setTimeout(() => {
          successMessage.remove();
        }, 5000);
      }
    </script>
  </body>
</html>
